.page-header
  %h1= link_to t('.title'), admin_ticket_codes_path

= link_to t('.new'), new_admin_ticket_code_path, class: 'btn btn-primary'

%h3= t('.total', count: @ticket_codes.total_count)

.well
  = search_form_for @search, url: admin_ticket_codes_path, html: { class: 'nomargin' }, method: :get do |f|
    .row-fluid
      .span3
        = f.search_field :code_eq, placeholder: TicketCode.human_attribute_name(:code), label: false, required: false
      .span3
        = f.select :distributor_id_eq, Distributor.asc_by(:title).collect{|c| [c.to_s, c.id]}, prompt: 'Все распространители', label: false, required: false
      .span3
        = f.select :kind_eq, TicketCode.kinds, prompt: 'Все типы', label: false, required: false
    .row-fluid
      .span3
        = f.select :state_eq, TicketCode.state_names, prompt: 'Все состояния', label: false, required: false
      .span3
        = f.select :category_eq, TicketCode.categories, prompt: 'Все категории', label: false, required: false
      .span3
        = f.submit t(".search"), :class => 'btn btn-primary'
        = link_to t(".reset"), admin_ticket_codes_path, :class => 'btn btn-primary'

= paginate @ticket_codes

%table.table.table-striped
  %thead
    %tr
      %th= TicketCode.human_attribute_name :id
      %th= TicketCode.human_attribute_name :distributor
      %th= TicketCode.human_attribute_name :kind
      %th= TicketCode.human_attribute_name :price
      %th= TicketCode.human_attribute_name :code
      %th= TicketCode.human_attribute_name :state
      %th= Ticket.human_attribute_name :user
      %th
        .nowrap= TicketCode.human_attribute_name :created_at
      %th= TicketCode.human_attribute_name :actions
  %tbody
    = render @ticket_codes

= paginate @ticket_codes


= link_to t('.new'), new_admin_ticket_code_path, class: 'btn btn-primary'
